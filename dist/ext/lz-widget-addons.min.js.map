{"version":3,"sources":["webpack://[name]/webpack/bootstrap","webpack://[name]/external \"d3\"","webpack://[name]/./esm/helpers/layouts.js","webpack://[name]/./esm/ext/lz-widget-addons.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","d3","sqrt3","Math","sqrt","triangledown","context","size","y","moveTo","lineTo","closePath","applyNamespaces","element","namespace","default_namespace","default","re","match","base","resolved_namespace","replace","exec","length","push","merge","namespaced_element","namespaced_property","custom_layout","default_layout","Error","custom_type","default_type","Array","isArray","deepCopy","item","JSON","parse","stringify","nameToSymbol","shape","factory_name","charAt","toUpperCase","slice","STATUS_VERBS","STATUS_ADJECTIVES","STATUS_ANTIVERBS","install","LocusZoom","_Button","Widgets","_BaseWidget","covariates_model_tooltip","covariates_model_association","Layouts","unnamespaced","html","covariates_model_plot","covariates_model_plot_toolbar","widgets","type","button_html","button_title","position","add","this","parent_plot","state","model","covariates","CovariatesModel","button","element_reference","plot","toHTML","toString","applyState","updateWidget","removeByIdx","idx","splice","removeAll","update","menu","setColor","layout","color","setHtml","setTitle","setOnclick","populate","setPopulate","selector","inner_selector","append","table","forEach","covariate","row","attr","style","on","preUpdate","count","disable","show","parent_panel","data_layer_ids_by_z_index","reverse","id","data_layer","data_layers","statuses","status_adj","status_idx","indexOf","status_verb","onclick","highlight","global_statuses","at_top","at_bottom","td","moveBack","moveForward","confirm","parent","removeDataLayer","use"],"mappings":"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","file":"ext/lz-widget-addons.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 6);\n","module.exports = d3;","/**\n * Utilities for modifying or working with layout objects\n * @module\n * @private\n */\nimport * as d3 from 'd3';\n\nconst sqrt3 = Math.sqrt(3);\n// D3 v5 does not provide a triangle down symbol shape, but it is very useful for showing direction of effect.\n//  Modified from https://github.com/d3/d3-shape/blob/master/src/symbol/triangle.js\nconst triangledown = {\n    draw(context, size) {\n        const y = -Math.sqrt(size / (sqrt3 * 3));\n        context.moveTo(0, -y * 2);\n        context.lineTo(-sqrt3 * y, y);\n        context.lineTo(sqrt3 * y, y);\n        context.closePath();\n    },\n};\n\n/**\n * Apply namespaces to layout, recursively\n * @private\n  */\nfunction applyNamespaces(element, namespace, default_namespace) {\n    if (namespace) {\n        if (typeof namespace == 'string') {\n            namespace = { default: namespace };\n        }\n    } else {\n        namespace = { default: '' };\n    }\n    if (typeof element == 'string') {\n        const re = /\\{\\{namespace(\\[[A-Za-z_0-9]+\\]|)\\}\\}/g;\n        let match, base, key, resolved_namespace;\n        const replace = [];\n        while ((match = re.exec(element)) !== null) {\n            base = match[0];\n            key = match[1].length ? match[1].replace(/(\\[|\\])/g, '') : null;\n            resolved_namespace = default_namespace;\n            if (namespace != null && typeof namespace == 'object' && typeof namespace[key] != 'undefined') {\n                resolved_namespace = namespace[key] + (namespace[key].length ? ':' : '');\n            }\n            replace.push({ base: base, namespace: resolved_namespace });\n        }\n        for (let r in replace) {\n            element = element.replace(replace[r].base, replace[r].namespace);\n        }\n    } else if (typeof element == 'object' && element != null) {\n        if (typeof element.namespace != 'undefined') {\n            const merge_namespace = (typeof element.namespace == 'string') ? { default: element.namespace } : element.namespace;\n            namespace = merge(namespace, merge_namespace);\n        }\n        let namespaced_element, namespaced_property;\n        for (let property in element) {\n            if (property === 'namespace') {\n                continue;\n            }\n            namespaced_element = applyNamespaces(element[property], namespace, default_namespace);\n            namespaced_property = applyNamespaces(property, namespace, default_namespace);\n            if (property !== namespaced_property) {\n                delete element[property];\n            }\n            element[namespaced_property] = namespaced_element;\n        }\n    }\n    return element;\n}\n\n/**\n * A helper method used for merging two objects. If a key is present in both, takes the value from the first object.\n *   Values from `default_layout` will be cleanly copied over, ensuring no references or shared state.\n *\n * Frequently used for preparing custom layouts. Both objects should be JSON-serializable.\n *\n * @alias LayoutRegistry.merge\n * @param {object} custom_layout An object containing configuration parameters that override or add to defaults\n * @param {object} default_layout An object containing default settings.\n * @returns {object} The custom layout is modified in place and also returned from this method.\n */\nfunction merge(custom_layout, default_layout) {\n    if (typeof custom_layout !== 'object' || typeof default_layout !== 'object') {\n        throw new Error(`LocusZoom.Layouts.merge only accepts two layout objects; ${typeof custom_layout}, ${typeof default_layout} given`);\n    }\n    for (let property in default_layout) {\n        if (!Object.prototype.hasOwnProperty.call(default_layout, property)) {\n            continue;\n        }\n        // Get types for comparison. Treat nulls in the custom layout as undefined for simplicity.\n        // (javascript treats nulls as \"object\" when we just want to overwrite them as if they're undefined)\n        // Also separate arrays from objects as a discrete type.\n        let custom_type = custom_layout[property] === null ? 'undefined' : typeof custom_layout[property];\n        let default_type = typeof default_layout[property];\n        if (custom_type === 'object' && Array.isArray(custom_layout[property])) {\n            custom_type = 'array';\n        }\n        if (default_type === 'object' && Array.isArray(default_layout[property])) {\n            default_type = 'array';\n        }\n        // Unsupported property types: throw an exception\n        if (custom_type === 'function' || default_type === 'function') {\n            throw new Error('LocusZoom.Layouts.merge encountered an unsupported property type');\n        }\n        // Undefined custom value: pull the default value\n        if (custom_type === 'undefined') {\n            custom_layout[property] = deepCopy(default_layout[property]);\n            continue;\n        }\n        // Both values are objects: merge recursively\n        if (custom_type === 'object' && default_type === 'object') {\n            custom_layout[property] = merge(custom_layout[property], default_layout[property]);\n            continue;\n        }\n    }\n    return custom_layout;\n}\n\nfunction deepCopy(item) {\n    return JSON.parse(JSON.stringify(item));\n}\n\n/**\n * Convert name to symbol\n * Layout objects accept symbol names as strings (circle, triangle, etc). Convert to symbol objects.\n * @return {object|null} An object that implements a draw method (eg d3-shape symbols or extra LZ items)\n */\nfunction nameToSymbol(shape) {\n    if (!shape) {\n        return null;\n    }\n    if (shape === 'triangledown') {\n        // D3 does not provide this symbol natively\n        return triangledown;\n    }\n    // Legend shape names are strings; need to connect this to factory. Eg circle --> d3.symbolCircle\n    const factory_name = `symbol${shape.charAt(0).toUpperCase() + shape.slice(1)}`;\n    return d3[factory_name] || null;\n}\n\nexport { applyNamespaces, deepCopy, merge, nameToSymbol };\n","/**\n * Optional LocusZoom extension: must be included separately, and after LocusZoom has been loaded\n *\n * This contains (reusable) code to power some (rarely used) demo features:\n *  - The \"covariates model\" demo, in which an LZ toolbar widget is populated\n *    with information by selecting points on the plot (see \"covariates model\" demo)\n *  - The \"data layers\" button, which allows fine control over multiple data layers shown in the same panel\n *    (show/hide, fade, change order, etc). This is powerful, but rarely used because showing many datasets in a small\n *    space makes data hard to see. (see \"multiple phenotypes layered\" demo)\n *\n * ### Loading and usage\n * The page must incorporate and load all libraries before this file can be used, including:\n * - LocusZoom\n *\n * To use in an environment without special JS build tooling, simply load the extension file as JS from a CDN (after any dependencies):\n *\n * ```javascript\n * <script src=\"https://cdn.jsdelivr.net/npm/locuszoom@INSERT_VERSION_HERE/dist/ext/lz-widget-addons.min.js\" type=\"application/javascript\"></script>\n * ```\n *\n * To use with ES6 modules, the plugin must be loaded and registered explicitly before use:\n * ```javascript\n * import LocusZoom from 'locuszoom';\n * import WidgetAddons from 'locuszoom/esm/ext/lz-widget-addons';\n * LocusZoom.use(WidgetAddons);\n * ```\n *\n * Then use the features made available by this extension. (see demos and documentation for guidance)\n *\n * @module\n */\nimport {deepCopy} from '../helpers/layouts';\n\n// In order to work in a UMD context, this module imports the top-level LocusZoom symbol\n\nconst STATUS_VERBS = ['highlight', 'select', 'fade', 'hide'];\nconst STATUS_ADJECTIVES = ['highlighted', 'selected', 'faded', 'hidden'];\nconst STATUS_ANTIVERBS = ['unhighlight', 'deselect', 'unfade', 'show'];\n\n\n// LocusZoom plugins work by exporting a function that receives the `LocusZoom` object\n// This allows them to work in many contexts (including script tags and ES6 imports)\nfunction install(LocusZoom) {\n    const _Button = LocusZoom.Widgets.get('_Button');\n    const _BaseWidget = LocusZoom.Widgets.get('BaseWidget');\n\n\n    /**\n     * Special button/menu to allow model building by tracking individual covariants. Will track a list of covariate\n     *   objects and store them in the special `model.covariates` field of plot `state`.\n     *\n     * This is a prototype widget for building a conditional analysis model, but it performs no calculation\n     *  functionality beyond building a list of items.\n     * @alias module:ext/lz-widget-addons~covariates_model\n     * @see module:LocusZoom_Widgets~BaseWidget\n     * @param {object} layout\n     * @param {string} layout.button_html The HTML to render inside the button\n     * @param {string} layout.button_title Text to display as a tooltip when hovering over the button\n     */\n    class CovariatesModel extends _BaseWidget {\n        initialize() {\n            // Initialize state.model.covariates\n            this.parent_plot.state.model = this.parent_plot.state.model || {};\n            this.parent_plot.state.model.covariates = this.parent_plot.state.model.covariates || [];\n            // Create an object at the plot level for easy access to interface methods in custom client-side JS\n            /**\n             * When a covariates model toolbar element is present, create (one) object at the plot level that exposes\n             *   widget data and state for custom interactions with other plot elements.\n             */\n            this.parent_plot.CovariatesModel = {\n                /** @member {Button} */\n                button: this,\n                /**\n                 * Add an element to the model and show a representation of it in the toolbar widget menu. If the\n                 *   element is already part of the model, do nothing (to avoid adding duplicates).\n                 * When plot state is changed, this will automatically trigger requests for new data accordingly.\n                 * @param {string|object} element_reference Can be any value that can be put through JSON.stringify()\n                 *   to create a serialized representation of itself.\n                 */\n                add: (element_reference) => {\n                    const plot = this.parent_plot;\n                    const element = deepCopy(element_reference);\n                    if (typeof element_reference == 'object' && typeof element.html != 'string') {\n                        element.html = ( (typeof element_reference.toHTML == 'function') ? element_reference.toHTML() : element_reference.toString());\n                    }\n                    // Check if the element is already in the model covariates array and return if it is.\n                    for (let i = 0; i < plot.state.model.covariates.length; i++) {\n                        if (JSON.stringify(plot.state.model.covariates[i]) === JSON.stringify(element)) {\n                            return plot;\n                        }\n                    }\n                    plot.state.model.covariates.push(element);\n                    plot.applyState();\n                    plot.CovariatesModel.updateWidget();\n                    return plot;\n                },\n                /**\n                 * Remove an element from `state.model.covariates` (and from the toolbar widget menu's\n                 *  representation of the state model). When plot state is changed, this will automatically trigger\n                 *  requests for new data accordingly.\n                 * @param {number} idx Array index of the element, in the `state.model.covariates array`.\n                 */\n                removeByIdx: (idx) => {\n                    const plot = this.parent_plot;\n                    if (typeof plot.state.model.covariates[idx] == 'undefined') {\n                        throw new Error(`Unable to remove model covariate, invalid index: ${idx.toString()}`);\n                    }\n                    plot.state.model.covariates.splice(idx, 1);\n                    plot.applyState();\n                    plot.CovariatesModel.updateWidget();\n                    return plot;\n                },\n                /**\n                 * Empty the `state.model.covariates` array (and toolbar widget menu representation thereof) of all\n                 *  elements. When plot state is changed, this will automatically trigger requests for new data accordingly\n                 */\n                removeAll: () => {\n                    const plot = this.parent_plot;\n                    plot.state.model.covariates = [];\n                    plot.applyState();\n                    plot.CovariatesModel.updateWidget();\n                    return plot;\n                },\n                /**\n                 * Manually trigger the update methods on the toolbar widget's button and menu elements to force\n                 *   display of most up-to-date content. Can be used to force the toolbar to reflect changes made, eg if\n                 *   modifying `state.model.covariates` directly instead of via `plot.CovariatesModel`\n                 */\n                updateWidget: () => {\n                    this.button.update();\n                    this.button.menu.update();\n                },\n            };\n        }\n\n        update() {\n\n            if (this.button) {\n                return this;\n            }\n\n            this.button = new _Button(this)\n                .setColor(this.layout.color)\n                .setHtml(this.layout.button_html)\n                .setTitle(this.layout.button_title)\n                .setOnclick(() => {\n                    this.button.menu.populate();\n                });\n\n            this.button.menu.setPopulate(() => {\n                const selector = this.button.menu.inner_selector;\n                selector.html('');\n                // General model HTML representation\n                if (typeof this.parent_plot.state.model.html != 'undefined') {\n                    selector.append('div').html(this.parent_plot.state.model.html);\n                }\n                // Model covariates table\n                if (!this.parent_plot.state.model.covariates.length) {\n                    selector.append('i').html('no covariates in model');\n                } else {\n                    selector.append('h5').html(`Model Covariates (${this.parent_plot.state.model.covariates.length})`);\n                    const table = selector.append('table');\n                    this.parent_plot.state.model.covariates.forEach((covariate, idx) => {\n                        const html = ((typeof covariate == 'object' && typeof covariate.html == 'string') ? covariate.html : covariate.toString());\n                        const row = table.append('tr');\n                        row.append('td').append('button')\n                            .attr('class', `lz-toolbar-button lz-toolbar-button-${this.layout.color}`)\n                            .style('margin-left', '0em')\n                            .on('click', () => this.parent_plot.CovariatesModel.removeByIdx(idx))\n                            .html('×');\n                        row.append('td')\n                            .html(html);\n                    });\n                    selector.append('button')\n                        .attr('class', `lz-toolbar-button lz-toolbar-button-${this.layout.color}`)\n                        .style('margin-left', '4px')\n                        .html('× Remove All Covariates')\n                        .on('click', () => this.parent_plot.CovariatesModel.removeAll());\n                }\n            });\n\n            this.button.preUpdate = () => {\n                let html = 'Model';\n                const count = this.parent_plot.state.model.covariates.length;\n                if (count) {\n                    const noun = count > 1 ? 'covariates' : 'covariate';\n                    html += ` (${count} ${noun})`;\n                }\n                this.button.setHtml(html).disable(false);\n            };\n\n            this.button.show();\n\n            return this;\n        }\n    }\n\n\n    /**\n     * Menu for manipulating multiple data layers in a single panel: show/hide, change order, etc.\n     * @alias module:ext/lz-widget-addons~data_layers\n     * @see module:LocusZoom_Widgets~BaseWidget\n     */\n    class DataLayersWidget extends _BaseWidget {\n        update() {\n\n            if (typeof this.layout.button_html != 'string') {\n                this.layout.button_html = 'Data Layers';\n            }\n            if (typeof this.layout.button_title != 'string') {\n                this.layout.button_title = 'Manipulate Data Layers (sort, dim, show/hide, etc.)';\n            }\n\n            if (this.button) {\n                return this;\n            }\n\n            this.button = new _Button(this)\n                .setColor(this.layout.color)\n                .setHtml(this.layout.button_html)\n                .setTitle(this.layout.button_title)\n                .setOnclick(() => {\n                    this.button.menu.populate();\n                });\n\n            this.button.menu.setPopulate(() => {\n                this.button.menu.inner_selector.html('');\n                const table = this.button.menu.inner_selector.append('table');\n                this.parent_panel.data_layer_ids_by_z_index.slice().reverse().forEach((id, idx) => {\n                    const data_layer = this.parent_panel.data_layers[id];\n                    const name = (typeof data_layer.layout.name != 'string') ? data_layer.id : data_layer.layout.name;\n                    const row = table.append('tr');\n                    // Layer name\n                    row.append('td').html(name);\n                    // Status toggle buttons\n                    this.layout.statuses.forEach((status_adj) => {\n                        const status_idx = STATUS_ADJECTIVES.indexOf(status_adj);\n                        const status_verb = STATUS_VERBS[status_idx];\n                        let html, onclick, highlight;\n                        if (data_layer.global_statuses[status_adj]) {\n                            html = STATUS_ANTIVERBS[status_idx];\n                            onclick = `un${status_verb}AllElements`;\n                            highlight = '-highlighted';\n                        } else {\n                            html = STATUS_VERBS[status_idx];\n                            onclick = `${status_verb}AllElements`;\n                            highlight = '';\n                        }\n                        row.append('td').append('a')\n                            .attr('class', `lz-toolbar-button lz-toolbar-button-${this.layout.color}${highlight}`)\n                            .style('margin-left', '0em')\n                            .on('click', () => {\n                                data_layer[onclick]();\n                                this.button.menu.populate();\n                            })\n                            .html(html);\n                    });\n                    // Sort layer buttons\n                    const at_top = (idx === 0);\n                    const at_bottom = (idx === (this.parent_panel.data_layer_ids_by_z_index.length - 1));\n                    const td = row.append('td');\n                    td.append('a')\n                        .attr('class', `lz-toolbar-button lz-toolbar-button-group-start lz-toolbar-button-${this.layout.color}${at_bottom ? '-disabled' : ''}`)\n                        .style('margin-left', '0em')\n                        .on('click', () => {\n                            data_layer.moveBack(); this.button.menu.populate();\n                        })\n                        .html('▾')\n                        .attr('title', 'Move layer down (further back)');\n                    td.append('a')\n                        .attr('class', `lz-toolbar-button lz-toolbar-button-group-middle lz-toolbar-button-${this.layout.color}${at_top ? '-disabled' : ''}`)\n                        .style('margin-left', '0em')\n                        .on('click', () => {\n                            data_layer.moveForward(); this.button.menu.populate();\n                        })\n                        .html('▴')\n                        .attr('title', 'Move layer up (further front)');\n                    td.append('a')\n                        .attr('class', 'lz-toolbar-button lz-toolbar-button-group-end lz-toolbar-button-red')\n                        .style('margin-left', '0em')\n                        .on('click', () => {\n                            if (confirm(`Are you sure you want to remove the ${name} layer? This cannot be undone.`)) {\n                                data_layer.parent.removeDataLayer(id);\n                            }\n                            return this.button.menu.populate();\n                        })\n                        .html('×')\n                        .attr('title', 'Remove layer');\n                });\n                return this;\n            });\n\n            this.button.show();\n\n            return this;\n        }\n    }\n\n    const covariates_model_tooltip = function () {\n        const covariates_model_association = LocusZoom.Layouts.get('tooltip', 'standard_association', { unnamespaced: true });\n        covariates_model_association.html += '<a href=\"javascript:void(0);\" onclick=\"LocusZoom.getToolTipPlot(this).CovariatesModel.add(LocusZoom.getToolTipData(this));\">Condition on Variant</a><br>';\n        return covariates_model_association;\n    }();\n\n    const covariates_model_plot = function () {\n        const covariates_model_plot_toolbar = LocusZoom.Layouts.get('toolbar', 'standard_association', { unnamespaced: true });\n        covariates_model_plot_toolbar.widgets.push({\n            type: 'covariates_model',\n            button_html: 'Model',\n            button_title: 'Show and edit covariates currently in model',\n            position: 'left',\n        });\n        return covariates_model_plot_toolbar;\n    }();\n\n    LocusZoom.Widgets.add('covariates_model', CovariatesModel);\n    LocusZoom.Widgets.add('data_layers', DataLayersWidget);\n\n    LocusZoom.Layouts.add('tooltip', 'covariates_model_association', covariates_model_tooltip);\n    LocusZoom.Layouts.add('toolbar', 'covariates_model_plot', covariates_model_plot);\n}\n\nif (typeof LocusZoom !== 'undefined') {\n    // Auto-register the plugin when included as a script tag. ES6 module users must register via LocusZoom.use()\n    // eslint-disable-next-line no-undef\n    LocusZoom.use(install);\n}\n\n\nexport default install;\n"],"sourceRoot":""}